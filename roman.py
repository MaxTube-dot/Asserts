import telebot
from telebot import types

# ‚¨áÔ∏è –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô –¢–û–ö–ï–ù (–ø–æ–ª—É—á–∏–ª–∏ –æ—Ç @BotFather)
TOKEN = "8102103562:AAH-iNzqYyfKtecAtIiOMKQ8z6f56qu7OYk"

bot = telebot.TeleBot(TOKEN)

# –î–∞–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω
questions = {
    "1": {
        "title": "üîã –≠–Ω–µ—Ä–≥–∏—è –ë—É–¥—É—â–µ–≥–æ",
        "subtitle": "–≠–Ω–µ—Ä–≥–æ–ø–µ—Ä–µ—Ö–æ–¥ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –ø—Ä–∏ -60¬∞C",
        "options": ["A) Industry 5.0", "B) –≠–Ω–µ—Ä–≥–æ–∫–ª–∞—Å—Ç–µ—Ä—ã + BESS", "C) –ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"]
    },
    "2": {
        "title": "üõ∞ –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –î–µ—Ä–∂–∞–≤–∞",
        "subtitle": "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤ —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö",
        "options": ["A) AR-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è", "B) –¢–µ–ª–µ–º–µ–¥–∏—Ü–∏–Ω–∞", "C) –ì–ª–æ–±–∞–ª—å–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞ —Å–ø—É—Ç–Ω–∏–∫–æ–≤"]
    },
    "3": {
        "title": "üìö –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ 2.0",
        "subtitle": "–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–π —ç–ø–æ—Ö–∏",
        "options": ["A) 3D-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", "B) –û–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã", "C) AI-–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ"]
    },
    "4": {
        "title": "‚ùÑÔ∏è –£–º–Ω—ã–π –°–µ–≤–µ—Ä",
        "subtitle": "–í—ã–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ -60¬∞C",
        "options": ["A) –ú–µ–¥–∫–∞—Ä—Ç—ã", "B) IoT –¥–∞—Ç—á–∏–∫–∏", "C) –ê—Ä–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Ç–µ—Ä"]
    },
    "5": {
        "title": "üë¥ –ê–∫—Ç–∏–≤–Ω–æ–µ –î–æ–≥–æ–ª–µ—Ç–∏–µ",
        "subtitle": "–ú–µ–¥–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –ø–æ–∂–∏–ª–æ–≥–æ –Ω–∞—Å–µ–ª–µ–Ω–∏—è",
        "options": ["A) Digital Twin", "B) HealthHub", "C) –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"]
    },
    "6": {
        "title": "üèô –¶–∏—Ñ—Ä–æ–≤–æ–π –†–µ–≥–∏–æ",
        "subtitle": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–≥–∞–ø–æ–ª–∏—Å–æ–º",
        "options": ["A) –¢–∞–∫—Å–∏ –∏ –¥–æ—Å—Ç–∞–≤–∫–∞", "B) –£–º–Ω—ã–µ –∫–∞–º–µ—Ä—ã", "C) Digital Twin City"]
    },
    "7": {
        "title": "üß¨ –ë–∏–æ—Ç–µ—Ö-–ù–∞—Ü–∏—è",
        "subtitle": "–†–∞–∑–≤–∏—Ç–∏–µ –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π",
        "options": ["A) –ì–µ–Ω–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ", "B) –ì–ª–æ–±–∞–ª—å–Ω–∞—è —ç–∫–æ—Å–∏—Å—Ç–µ–º–∞", "C) –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"]
    },
    "8": {
        "title": "‚öôÔ∏è –ò–Ω–¥—É—Å—Ç—Ä–∏—è 5.0",
        "subtitle": "–¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞",
        "options": ["A) Industry 5.0", "B) App –¥–ª—è –¥–µ—Ñ–µ–∫—Ç–æ–≤", "C) –ü–∏–ª–æ—Ç –æ–¥–Ω–æ–≥–æ —Ü–µ—Ö–∞"]
    },
    "9": {
        "title": "üé® –¶–∏—Ñ—Ä–æ–≤–æ–µ –ù–∞—Å–ª–µ–¥–∏–µ",
        "subtitle": "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ –Ω–∞—Å–ª–µ–¥–∏—è",
        "options": ["A) Europeana Plus", "B) 3D –º—É–∑–µ–π", "C) ArtStation"]
    },
    "10": {
        "title": "üåç –ê—Ä–∫—Ç–∏—á–µ—Å–∫–∞—è –°–∏–ª–∞",
        "subtitle": "–°–Ω–∏–∂–µ–Ω–∏–µ —É–≥–ª–µ—Ä–æ–¥–Ω–æ–≥–æ —Å–ª–µ–¥–∞",
        "options": ["A) –°–æ–ª–Ω–µ—á–Ω—ã–µ –ø–∞–Ω–µ–ª–∏", "B) –¶–∏—Ä–∫—É–ª—è—Ä–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞", "C) –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CO2"]
    }
}

# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
answers = {"1": "B", "2": "C", "3": "C", "4": "C", "5": "B", "6": "C", "7": "B", "8": "A", "9": "A", "10": "B"}

# –°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫
scores = {
    "1B": 15, "2C": 15, "3C": 15, "4C": 15, "5B": 15, "6C": 15, "7B": 15, "8A": 15, "9A": 15, "10B": 15,
    "4B": 10, "5A": 10, "6B": 10, "8C": 10, "9B": 10, "10C": 10,
    "1C": 5, "2A": 5, "3B": 5, "7A": 5, "10A": 5, "6A": 5,
}

user_state = {}

@bot.message_handler(commands=['start'])
def start(message):
    """–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∞"""
    user_id = message.from_user.id
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_state[user_id] = {
        "current_question": 1,  # –ù–∞—á–∏–Ω–∞–µ–º —Å –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
        "answers": {},  # –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
        "total_score": 0,  # –ò—Ç–æ–≥–æ–≤—ã–π —Å—á–µ—Ç
        "in_progress": True  # –§–ª–∞–≥ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
    }
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å
    send_question(user_id, 1)

def send_question(user_id, question_num):
    """–û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"""
    question_data = questions.get(str(question_num), {})
    
    markup = types.InlineKeyboardMarkup()
    
    # –ö–Ω–æ–ø–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤
    options = question_data.get("options", [])
    for option in options:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –±—É–∫–≤—É –æ—Ç–≤–µ—Ç–∞ –∏–∑ —Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª –ø–µ—Ä–µ–¥ ")")
        letter = option.split(")")[0].strip()
        btn = types.InlineKeyboardButton(option, callback_data=f"q{question_num}_{letter}")
        markup.add(btn)
    
    # –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    if question_num > 1:
        try:
            bot.edit_message_text(
                chat_id=user_id,
                message_id=user_state[user_id].get("last_message_id"),
                text=f"*–í–æ–ø—Ä–æ—Å {question_num}/10*\n\n"
                     f"*{question_data.get('title', '')}*\n\n"
                     f"_{question_data.get('subtitle', '')}_\n\n"
                     "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞:",
                reply_markup=markup,
                parse_mode="Markdown"
            )
        except:
            # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            msg = bot.send_message(
                user_id,
                f"*–í–æ–ø—Ä–æ—Å {question_num}/10*\n\n"
                f"*{question_data.get('title', '')}*\n\n"
                f"_{question_data.get('subtitle', '')}_\n\n"
                "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞:",
                reply_markup=markup,
                parse_mode="Markdown"
            )
            user_state[user_id]["last_message_id"] = msg.message_id
    else:
        # –î–ª—è –ø–µ—Ä–≤–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        msg = bot.send_message(
            user_id,
            f"*–í–æ–ø—Ä–æ—Å {question_num}/10*\n\n"
            f"*{question_data.get('title', '')}*\n\n"
            f"_{question_data.get('subtitle', '')}_\n\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞:",
            reply_markup=markup,
            parse_mode="Markdown"
        )
        user_state[user_id]["last_message_id"] = msg.message_id

@bot.callback_query_handler(func=lambda call: call.data.startswith("q"))
def handle_answer(call):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å"""
    user_id = call.from_user.id
    
    if user_id not in user_state or not user_state[user_id].get("in_progress", False):
        bot.answer_callback_query(call.id, "–¢–µ—Å—Ç –Ω–µ –Ω–∞—á–∞—Ç. –ù–∞–∂–º–∏—Ç–µ /start")
        return
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–æ–º–µ—Ä –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç
    parts = call.data.split("_")
    question_num = int(parts[0][1:])  # –£–±–∏—Ä–∞–µ–º "q" –≤ –Ω–∞—á–∞–ª–µ
    answer = parts[1]
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç
    user_state[user_id]["answers"][str(question_num)] = answer
    
    # –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –±–∞–ª–ª—ã –∑–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å
    score_key = str(question_num) + answer
    question_score = scores.get(score_key, 0)
    user_state[user_id]["total_score"] += question_score
    
    bot.answer_callback_query(call.id, f"–û—Ç–≤–µ—Ç –ø—Ä–∏–Ω—è—Ç! +{question_score} –±–∞–ª–ª–æ–≤")
    
    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∞–µ–º —Ç–µ—Å—Ç
    next_question = question_num + 1
    
    if next_question <= 10:
        # –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –≤–æ–ø—Ä–æ—Å–æ–º
        import time
        time.sleep(0.5)
        send_question(user_id, next_question)
    else:
        # –í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ–π–¥–µ–Ω—ã, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥
        show_results(user_id)

def show_results(user_id):
    """–ü–æ–∫–∞–∑ –∏—Ç–æ–≥–æ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"""
    if user_id not in user_state:
        return
    
    user_data = user_state[user_id]
    total_score = user_data["total_score"]
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    if total_score >= 140:
        level = "üèÜ –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞! (–≠–∫—Å–ø–µ—Ä—Ç)"
        level_desc = "–í—ã –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç–µ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤!"
    elif total_score >= 120:
        level = "‚úÖ –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç"
        level_desc = "–í—ã —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç–µ—Å—å –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π!"
    elif total_score >= 100:
        level = "üìä –•–æ—Ä–æ—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ"
        level_desc = "–í—ã –ø–æ–∫–∞–∑–∞–ª–∏ —Ö–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è –ø–æ –∫–ª—é—á–µ–≤—ã–º —Ç–µ–º–∞–º!"
    elif total_score >= 80:
        level = "‚ö†Ô∏è –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å"
        level_desc = "–ï—Å—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –Ω–æ –Ω—É–∂–Ω–æ —É–≥–ª—É–±–∏—Ç—å –∑–Ω–∞–Ω–∏—è –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º —Ç–µ–º–∞–º!"
    else:
        level = "‚ùå –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ"
        level_desc = "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–π—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ!"
    
    # –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º
    details = "üìã *–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤:*\n\n"
    
    for q_num in range(1, 11):
        answer = user_data["answers"].get(str(q_num), "–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞")
        correct_answer = answers.get(str(q_num), "?")
        score_key = str(q_num) + answer
        question_score = scores.get(score_key, 0)
        
        # –≠–º–æ–¥–∑–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç–∞
        if answer == correct_answer:
            emoji = "‚úÖ"
        else:
            emoji = "‚ùå"
        
        details += f"{emoji} *–í–æ–ø—Ä–æ—Å {q_num}:* –í–∞—à –æ—Ç–≤–µ—Ç: {answer} (–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π: {correct_answer}) ‚Äî {question_score} –±–∞–ª–ª–æ–≤\n"
    
    # –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    result_text = f"""
üéØ *–ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢*

üìä *–û–±—â–∏–π —Å—á–µ—Ç:* {total_score}/150 –±–∞–ª–ª–æ–≤

{details}
üèÖ *–£—Ä–æ–≤–µ–Ω—å:* {level}
{level_desc}

*–°–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞!*

üîÑ –ù–∞–∂–º–∏—Ç–µ /start —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –∑–∞–Ω–æ–≤–æ
    """
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    bot.send_message(
        user_id,
        result_text,
        parse_mode="Markdown"
    )
    
    # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ—Å—Ç–∞
    user_data["in_progress"] = False

@bot.message_handler(commands=['help'])
def help_command(message):
    """–ü–æ–º–æ—â—å –ø–æ –±–æ—Ç—É"""
    help_text = """
ü§ñ *–ü–æ–º–æ—â—å –ø–æ –±–æ—Ç—É –í–µ–Ω—á—É—Ä-–¢—Ä–µ–Ω–¥—ã*

*–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:*
/start - –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç
/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É

*–ö–∞–∫ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç:*
1. –ù–∞–∂–º–∏—Ç–µ /start
2. –û—Ç–≤–µ—á–∞–π—Ç–µ –Ω–∞ –≤—Å–µ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–¥—Ä—è–¥
3. –í –∫–æ–Ω—Ü–µ –ø–æ–ª—É—á–∏—Ç–µ –∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. –ú–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É –≤–æ–ø—Ä–æ—Å—É

*–ë–∞–ª–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:*
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: 15 –±–∞–ª–ª–æ–≤
- –ß–∞—Å—Ç–∏—á–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 10 –±–∞–ª–ª–æ–≤
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: 5 –±–∞–ª–ª–æ–≤
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–ª: 150

*–£—Ä–æ–≤–Ω–∏:*
üèÜ 140-150 –±–∞–ª–ª–æ–≤: –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞!
‚úÖ 120-139 –±–∞–ª–ª–æ–≤: –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
üìä 100-119 –±–∞–ª–ª–æ–≤: –•–æ—Ä–æ—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ
‚ö†Ô∏è 80-99 –±–∞–ª–ª–æ–≤: –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å
‚ùå 0-79 –±–∞–ª–ª–æ–≤: –¢—Ä–µ–±—É–µ—Ç—Å—è –æ–±—É—á–µ–Ω–∏–µ
    """
    bot.send_message(message.chat.id, help_text, parse_mode="Markdown")

@bot.message_handler(func=lambda message: True)
def handle_other_messages(message):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—Ä—É–≥–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π"""
    user_id = message.from_user.id
    
    # –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–µ—Å—Ç–∞, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
    if user_id in user_state and user_state[user_id].get("in_progress", False):
        bot.send_message(user_id, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–∏—Ä–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ –≤—ã—à–µ ‚¨ÜÔ∏è")
    else:
        bot.send_message(user_id, "üëã –ü—Ä–∏–≤–µ—Ç! –ù–∞–∂–º–∏—Ç–µ /start —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç –∏–ª–∏ /help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.")

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!")
    print("–ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –∏ –Ω–∞–∂–º–∏—Ç–µ /start")
    try:
        bot.infinity_polling()
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞: {e}")
